##基于cortex m4内核的自动温控装置

####  内容

使用cortex m4开发板、温湿度传感器、电机，实现温度湿度控制。

#### 器件

- [x] NUCLEO-L476RG开发板 x 1

- [x] 温度湿度传感器DHT11  x 1
- [x] 微型130电机+风扇叶  x 1 
- [x] 电机驱动L9110S  x 1
- [x] HD44780 Text LCD  x 1
- [x] 按键 x 1
- [x] LED灯 x 1
- [x] 母对母杜邦线若干

#### 功能及特点

- 使用温度湿度传感器进行测量。
- 当温度超过设定阈值且湿度未超过时，风扇正转送风。
- 当湿度超过设定阈值且温度未超过时，风扇反转吸风除湿。
- 当温度和湿度均超过设定阈值时，LED灯闪烁，风扇正转。
- 使用一个按键控制风扇是否工作。
- 用一块LCD屏幕显示当前温度湿度，以及风扇状态。
- 通过串口通信，将温度湿度发送到PC端。
#### 设计原理
- DHT11传感器

  1.引脚介绍：

  Pin1：(VDD)，电源引脚，供电电压为3~5.5V。

  Pin2：（DATA），串行数据，单总线。 

  Pin3:（NC），空脚。 

  Pin4（VDD），接地端，电源负极。

  2.数据帧的描述：

  DATA用于微处理器与DHT11之间的通讯和同步，采用单总线数据格式，一次通讯时间4ms左右，数据分小数部分和整数部分，具体格式在下面说明，当前小数部分用于以后扩展，现读出为零。操作流程如下:

  一次完整的数据传输为40bit，高位先出。

  其数据格式：8bit湿度整数数据+8bit湿度小数数据+8bi温度整数数据+8bit温度小数数据

  数据传送正确时校验和数据等于“8bit湿度整数数据+8bit湿度小数数据+8bi温度整数数据+8bit温度小数数据”所得结果的末8位。

  3.时序描述：

  用户MCU发送一次开始信号后，DHT11从低功耗模式转换到高速模式，等待主机开始信号结束后，DHT11发送响应信号，送出40bit的数据，并触发一次信号采集，用户可选择读取部分数据。

- 温湿度传感器 DHT11 说明： https://blog.csdn.net/u013151320/article/details/50389624
- 直流电机说明 ： https://blog.csdn.net/teavamc/article/details/77429519

#### 遇到的一些问题

###### DHT11传感器使用时：

1. 数据难处理，40bit数据分为五组，较复杂。
2. 初期没有LCD屏幕，试图使用串口将传感器得到的数据传到PC。串口通信报错，发现是因为定义了模拟输出，与串口通信冲突。

###### 电机使用时：

1. 正转反转问题： 使用模拟信号输出至电机驱动模块，发现无法改变方向。试图在电机上加四根线，发现两边都接地了。。最后发现应该用数字信号输出到驱动.....




